import{a as me}from"./chunk-X6DKK77G.js";import{b as J,c as K,d as Q,e as X,f as Y,g as ee,h as te,i as ne,j as ie,k as ae,l as oe,m as re,n as le,o as se}from"./chunk-N4EAPRBL.js";import{j as q}from"./chunk-JNRCB37G.js";import{v as U,w as $}from"./chunk-HM5AIPJZ.js";import{a as x}from"./chunk-GMUQQUFC.js";import{n as j,p as N,q as B,r as G,s as W}from"./chunk-YL2U7DAQ.js";import{U as V,V as P,pa as F,ra as A,sa as H,ua as O}from"./chunk-UA7J2MJT.js";import"./chunk-IUWJHV3G.js";import{Ja as g,La as m,Nb as D,Ob as R,Wa as r,Xa as l,Y as E,Ya as p,Za as h,_a as v,ab as S,ca as _,cc as L,d as I,da as u,db as f,ec as y,fb as c,mb as Z,nb as d,ob as T,pb as M,sb as z,ua as s,ub as b,va as C,zb as k}from"./chunk-UIBI7PPD.js";var pe=e=>({"sm:mb-18":e}),_e=e=>({"pointer-events-none":e});function ue(e,o){if(e&1&&(r(0,"fuse-alert",13),d(1),l()),e&2){let n=c();m("appearance","outline")("showIcon",!1)("type",n.alert.type)("@shake",n.alert.type==="error"),s(),M(" ",n.alert.message," ")}}function ge(e,o){e&1&&(r(0,"th",24),d(1," Tenant Id"),l())}function fe(e,o){if(e&1&&(r(0,"td",25),d(1),l()),e&2){let n=o.$implicit;s(),T(n.id||"-")}}function he(e,o){e&1&&(r(0,"th",24),d(1," Name"),l())}function ve(e,o){if(e&1&&(r(0,"td",25),d(1),l()),e&2){let n=o.$implicit;s(),T(n.name)}}function xe(e,o){e&1&&(r(0,"th",24),d(1," Zitadel Tenant Id"),l())}function Ce(e,o){if(e&1&&(r(0,"td",25),d(1),l()),e&2){let n=o.$implicit;s(),T(n.zitadel_tenant_id||"-")}}function Te(e,o){e&1&&(r(0,"th",24),d(1," Action"),l())}function we(e,o){if(e&1){let n=S();r(0,"td",25)(1,"button",26),f("click",function(){let i=_(n).$implicit,a=c(2);return u(a.viewZitadelUsers(i.id))}),p(2,"mat-icon",27),l(),r(3,"button",28),f("click",function(){let i=_(n).$implicit,a=c(2);return u(a.viewDevice(i.id))}),p(4,"mat-icon",27),l(),r(5,"button",29),f("click",function(){let i=_(n).$implicit,a=c(2);return u(a.viewDeviceUser(i.id))}),p(6,"mat-icon",27),l(),r(7,"button",30),f("click",function(){let i=_(n).$implicit,a=c(2);return u(a.viewSharedUser(i.id))}),p(8,"mat-icon",27),l(),r(9,"button",31),f("click",function(){let i=_(n).$implicit,a=c(2);return u(a.viewDeviceLogs(i.id))}),p(10,"mat-icon",27),l(),r(11,"button",32),f("click",function(){let i=_(n).$implicit,a=c(2);return u(a.viewAdminLogs(i.id))}),p(12,"mat-icon",27),l(),r(13,"button",33),f("click",function(){let i=_(n).$implicit,a=c(2);return u(a.deleteConfirmation(i))}),p(14,"mat-icon",34),l()()}e&2&&(s(2),m("svgIcon","heroicons_outline:users"),s(2),m("svgIcon","heroicons_outline:computer-desktop"),s(2),m("svgIcon","mat_outline:devices"),s(2),m("svgIcon","mat_outline:screen_share"),s(2),m("svgIcon","mat_outline:screen_search_desktop"),s(2),m("svgIcon","mat_outline:manage_search"),s(2),m("svgIcon","heroicons_outline:trash"))}function Se(e,o){e&1&&p(0,"tr",35)}function be(e,o){e&1&&p(0,"tr",36)}function ye(e,o){if(e&1){let n=S();h(0),r(1,"table",14),h(2,15),g(3,ge,2,0,"th",16)(4,fe,2,1,"td",17),v(),h(5,18),g(6,he,2,0,"th",16)(7,ve,2,1,"td",17),v(),h(8,19),g(9,xe,2,0,"th",16)(10,Ce,2,1,"td",17),v(),h(11,20),g(12,Te,2,0,"th",16)(13,we,15,7,"td",17),v(),g(14,Se,1,0,"tr",21)(15,be,1,0,"tr",22),l(),r(16,"mat-paginator",23),f("page",function(i){_(n);let a=c();return u(a.handlePageEvent(i))}),l(),v()}if(e&2){let n=c();s(),m("dataSource",n.zitadelTenants),s(13),m("matHeaderRowDef",n.displayedColumns)("matHeaderRowDefSticky",!0),s(),m("matRowDefColumns",n.displayedColumns),s(),m("ngClass",b(10,_e,n.isLoading))("length",n.pagination.length)("pageIndex",n.pagination.page)("pageSize",n.pagination.size)("pageSizeOptions",n.pageSize)("showFirstLastButtons",!0)}}function Ie(e,o){e&1&&(r(0,"div",38),d(1," There are no tenants! "),l())}function Ee(e,o){if(e&1&&g(0,Ie,2,0,"div",37),e&2){let n=c();m("ngIf",!n.isLoading)}}function Ze(e,o){e&1&&(h(0),r(1,"div",39),p(2,"mat-progress-spinner",40),r(3,"h4",41),d(4,"Fetching your zitadel tenants..."),l()(),v())}var ce=(()=>{let o=class o{constructor(t,i,a,w,de){this._activatedRoute=t,this._fuseConfirmationService=i,this._router=a,this._zitadelTenantsService=w,this.router=de,this._subscription=new I,this.displayedColumns=["tenant_id","name","zitadel_tenant_id","action"],this.pageSize=se,this.pagination={length:0,page:0,size:this.pageSize[0]},this.alert={type:"success",message:""},this.showAlert=!1,this.isLoading=!1}ngOnInit(){this.pagination.page=Number(this._activatedRoute.snapshot.queryParamMap.get("page")??0),this.pagination.size=Number(this._activatedRoute.snapshot.queryParamMap.get("size")??this.pageSize[0]),this.isLoading=!0,this.getZitadelTenants()}getZitadelTenants(){this.isLoading=!0,this.queryParamHandler(),this._subscription.add(this._zitadelTenantsService.getZitadelTenants(this.pagination).subscribe({next:t=>{this.zitadelTenants=t.items,this.pagination.length=t.total,this.isLoading=!1},error:t=>{t.status!==404&&this.onFailed(t.status===500?"500: Internal Server Error":t.error.detail),this.isLoading=!1}}))}queryParamHandler(){this._router.navigate(["."],{relativeTo:this._activatedRoute,queryParams:{page:this.pagination.page,size:this.pagination.size}}).then()}handlePageEvent(t){this.pagination.length=t.length,this.pagination.size=t.pageSize,this.pagination.page=t.pageIndex,this.getZitadelTenants()}deleteConfirmation(t){this._subscription.add(this._fuseConfirmationService.open({title:"Remove this tenant",message:"This will remove the everything owned by the tenant.",icon:{show:!0,name:"heroicons_outline:exclamation-triangle",color:"warn"},actions:{confirm:{show:!0,label:"Remove",color:"warn"},cancel:{show:!0,label:"Cancel"}},dismissible:!0}).afterClosed().subscribe(i=>{i==="confirmed"&&this.deleteZitadelUser(t)}))}deleteZitadelUser(t){this.isLoading=!0,this.showAlert=!1,this._subscription.add(this._zitadelTenantsService.deleteZitadelTenant(t.id).subscribe({next:()=>this.getZitadelTenants(),error:i=>this.onFailed(i.status===500?"500: Internal Server Error":i.error)}))}viewZitadelUsers(t){this.router.navigate([x.ZITADEL_USERS],{queryParams:{tenant_id:t}}).then()}viewDevice(t){this.router.navigate([x.DEVICES],{queryParams:{tenant_id:t}}).then()}viewDeviceLogs(t){this.router.navigate([x.DEVICE_LOGS],{queryParams:{tenant_id:t}}).then()}viewDeviceUser(t){this.router.navigate([x.DEVICE_USERS],{queryParams:{tenant_id:t}}).then()}viewSharedUser(t){this.router.navigate([x.SHARED_USERS],{queryParams:{tenant_id:t}}).then()}viewAdminLogs(t){this.router.navigate([x.PORTAL_LOGS],{queryParams:{tenant_id:t}}).then()}onFailed(t){this.alert={type:"error",message:t},this.showAlert=!0,this.isLoading=!1}ngOnDestroy(){this._subscription?.unsubscribe()}};o.\u0275fac=function(i){return new(i||o)(C(L),C(q),C(y),C(me),C(y))},o.\u0275cmp=E({type:o,selectors:[["app-zitadel-tenants"]],standalone:!0,features:[z],decls:15,vars:7,consts:[["noClients",""],[1,"sm:absolute","sm:inset-0","flex","flex-col","flex-auto","min-w-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"border-b"],[1,"flex","flex-col","w-full","px-6"],[1,"flex","flex-col","sm:flex-row","flex-auto","sm:items-center","min-w-0","my-8"],[1,"flex","flex-auto","items-center","min-w-0"],[1,"flex","flex-col","min-w-0","ml-4"],["id","Clients",1,"text-2xl","md:text-5xl","font-semibold","tracking-tight","leading-7","md:leading-snug","truncate"],["class","mb-6",3,"appearance","showIcon","type",4,"ngIf"],[1,"relative","flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","overflow-hidden","sm:overflow-y-auto",3,"ngClass"],[4,"ngIf","ngIfElse"],[4,"ngIf"],[1,"mb-6",3,"appearance","showIcon","type"],["mat-table","",1,"w-full",3,"dataSource"],["matColumnDef","tenant_id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","zitadel_tenant_id"],["matColumnDef","action"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"sm:absolute","sm:inset-x-0","sm:bottom-0","border-b","sm:border-t","sm:border-b-0","z-10","bg-gray-50","dark:bg-transparent",3,"page","ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","matTooltip","view zitadel users",3,"click"],[1,"icon-size-5",3,"svgIcon"],["mat-icon-button","","matTooltip","view devices",3,"click"],["mat-icon-button","","matTooltip","view device users",3,"click"],["mat-icon-button","","matTooltip","view shared users",3,"click"],["mat-icon-button","","matTooltip","view device logs",3,"click"],["mat-icon-button","","matTooltip","view portal logs",3,"click"],["mat-icon-button","","matTooltip","delete",3,"click"],[1,"icon-size-5","text-red-500",3,"svgIcon"],["mat-header-row",""],["mat-row",""],["class","p-8 sm:p-16 text-4xl font-semibold tracking-tight text-center",4,"ngIf"],[1,"p-8","sm:p-16","text-4xl","font-semibold","tracking-tight","text-center"],[1,"w-full","h-full","flex","flex-col","justify-center","items-center","bg-default"],["color","primary","diameter","50","strokeWidth","5","mode","indeterminate"],[1,"mt-16"]],template:function(i,a){if(i&1&&(r(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6)(6,"div",7),d(7," Zitadel Tenants "),l()()()(),g(8,ue,2,5,"fuse-alert",8),l()(),r(9,"div",9)(10,"div",10),g(11,ye,17,12,"ng-container",11)(12,Ee,1,1,"ng-template",null,0,k)(14,Ze,5,0,"ng-container",12),l()()()),i&2){let w=Z(13);s(8),m("ngIf",!a.isLoading&&a.showAlert),s(2),m("ngClass",b(5,pe,(a.zitadelTenants==null?null:a.zitadelTenants.length)>0)),s(),m("ngIf",(a.zitadelTenants==null?null:a.zitadelTenants.length)>0)("ngIfElse",w),s(3),m("ngIf",a.isLoading&&!a.zitadelTenants)}},dependencies:[W,F,H,A,N,K,J,G,B,$,U,R,j,P,V,D,le,Q,Y,ie,ee,X,ae,te,ne,oe,re],data:{animation:O}});let e=o;return e})();var nt=[{path:"",component:ce}];export{nt as default};
